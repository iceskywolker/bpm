<?xml version="1.0" encoding="UTF-8"?>
<bpmn2:definitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bpmn2="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:activiti="http://activiti.org/bpmn" id="model-dc885561-1b3a-4fe5-adc2-0533c8c36359" name="request-student-contract" targetNamespace="http://bpmn.io/schema/bpmn" xsi:schemaLocation="http://www.omg.org/spec/BPMN/20100524/MODEL BPMN20.xsd">
  <bpmn2:process id="Process_l2exdsKWx" name="request-student-contract" isExecutable="true">
    <bpmn2:documentation>Proces zawierania umowy ramowej dla studenta</bpmn2:documentation>
    <bpmn2:startEvent id="Event_1">
      <bpmn2:outgoing>SequenceFlow_0g2s31s</bpmn2:outgoing>
    </bpmn2:startEvent>
    <bpmn2:serviceTask id="ServiceTask_1w8fa5a" name="Verify affiliation" implementation="verifyAffiliationSrv">
      <bpmn2:incoming>SequenceFlow_0g2s31s</bpmn2:incoming>
      <bpmn2:incoming>SequenceFlow_0gftvpn</bpmn2:incoming>
      <bpmn2:outgoing>SequenceFlow_14rhzc2</bpmn2:outgoing>
    </bpmn2:serviceTask>
    <bpmn2:sequenceFlow id="SequenceFlow_0g2s31s" sourceRef="Event_1" targetRef="ServiceTask_1w8fa5a" />
    <bpmn2:exclusiveGateway id="ExclusiveGateway_1f0wpq5" name="Has affiliation">
      <bpmn2:incoming>SequenceFlow_14rhzc2</bpmn2:incoming>
      <bpmn2:outgoing>SequenceFlow_0kqnxav</bpmn2:outgoing>
      <bpmn2:outgoing>SequenceFlow_16wfolg</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>
    <bpmn2:sequenceFlow id="SequenceFlow_14rhzc2" sourceRef="ServiceTask_1w8fa5a" targetRef="ExclusiveGateway_1f0wpq5" />
    <bpmn2:sequenceFlow id="SequenceFlow_0kqnxav" name="Yes" sourceRef="ExclusiveGateway_1f0wpq5" targetRef="Task_1w1e9d3">
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression">${affiliation_verified}</bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:userTask id="Task_1w1e9d3" name="Proceed contract request" activiti:assignee="${assignee}">
      <bpmn2:incoming>SequenceFlow_0kqnxav</bpmn2:incoming>
      <bpmn2:outgoing>SequenceFlow_1p31xye</bpmn2:outgoing>
    </bpmn2:userTask>
    <bpmn2:sequenceFlow id="SequenceFlow_16wfolg" name="No" sourceRef="ExclusiveGateway_1f0wpq5" targetRef="Task_0qr8lbk">
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression">${!affiliation_verified}</bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:userTask id="Task_0qr8lbk" name="Wait for user action" activiti:assignee="${assignee}">
      <bpmn2:incoming>SequenceFlow_16wfolg</bpmn2:incoming>
      <bpmn2:outgoing>SequenceFlow_0uc2ktp</bpmn2:outgoing>
    </bpmn2:userTask>
    <bpmn2:userTask id="Task_00n34jz" name="Wait to complete affiliation data" activiti:assignee="${assignee}">
      <bpmn2:incoming>SequenceFlow_0uc2ktp</bpmn2:incoming>
      <bpmn2:outgoing>SequenceFlow_0gftvpn</bpmn2:outgoing>
    </bpmn2:userTask>
    <bpmn2:sequenceFlow id="SequenceFlow_0gftvpn" sourceRef="Task_00n34jz" targetRef="ServiceTask_1w8fa5a" />
    <bpmn2:sequenceFlow id="SequenceFlow_0uc2ktp" sourceRef="Task_0qr8lbk" targetRef="Task_00n34jz" />
    <bpmn2:sequenceFlow id="SequenceFlow_1p31xye" sourceRef="Task_1w1e9d3" targetRef="Task_1cncorr" />
    <bpmn2:endEvent id="EndEvent_1xsmy30">
      <bpmn2:incoming>SequenceFlow_1b0nftl</bpmn2:incoming>
    </bpmn2:endEvent>
    <bpmn2:sequenceFlow id="SequenceFlow_1b0nftl" sourceRef="Task_1cncorr" targetRef="EndEvent_1xsmy30" />
    <bpmn2:serviceTask id="Task_1cncorr" name="Create draft" implementation="createContractAsDraftSrv">
      <bpmn2:incoming>SequenceFlow_1p31xye</bpmn2:incoming>
      <bpmn2:outgoing>SequenceFlow_1b0nftl</bpmn2:outgoing>
    </bpmn2:serviceTask>
    <bpmn2:textAnnotation id="TextAnnotation_08qedqk">
      <bpmn2:text>Potwierdzenie warunkow umowy i regulaminu</bpmn2:text>
    </bpmn2:textAnnotation>
    <bpmn2:association id="Association_1duwehy" sourceRef="Task_1w1e9d3" targetRef="TextAnnotation_08qedqk" />
    <bpmn2:textAnnotation id="TextAnnotation_1ahhyo6">
      <bpmn2:text>Wyb√≥r sposobu weryfikacji afiliacji</bpmn2:text>
    </bpmn2:textAnnotation>
    <bpmn2:association id="Association_0awos2r" sourceRef="Task_0qr8lbk" targetRef="TextAnnotation_1ahhyo6" />
    <bpmn2:textAnnotation id="TextAnnotation_147xt1f">
      <bpmn2:text>Tryb manualny albo IdP</bpmn2:text>
    </bpmn2:textAnnotation>
    <bpmn2:association id="Association_1keraq0" sourceRef="Task_00n34jz" targetRef="TextAnnotation_147xt1f" />
  </bpmn2:process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Process_l2exdsKWx">
      <bpmndi:BPMNShape id="_BPMNShape_Event_2" bpmnElement="Event_1">
        <dc:Bounds x="412" y="240" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="ServiceTask_1w8fa5a_di" bpmnElement="ServiceTask_1w8fa5a">
        <dc:Bounds x="600" y="218" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_0g2s31s_di" bpmnElement="SequenceFlow_0g2s31s">
        <di:waypoint x="448" y="258" />
        <di:waypoint x="600" y="258" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="ExclusiveGateway_1f0wpq5_di" bpmnElement="ExclusiveGateway_1f0wpq5" isMarkerVisible="true">
        <dc:Bounds x="855" y="233" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="847" y="209" width="66" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_14rhzc2_di" bpmnElement="SequenceFlow_14rhzc2">
        <di:waypoint x="700" y="258" />
        <di:waypoint x="855" y="258" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_0kqnxav_di" bpmnElement="SequenceFlow_0kqnxav">
        <di:waypoint x="905" y="258" />
        <di:waypoint x="1060" y="258" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="974" y="240" width="18" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="UserTask_17js0ql_di" bpmnElement="Task_1w1e9d3">
        <dc:Bounds x="1060" y="218" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_16wfolg_di" bpmnElement="SequenceFlow_16wfolg">
        <di:waypoint x="880" y="283" />
        <di:waypoint x="880" y="370" />
        <di:waypoint x="1060" y="370" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="888" y="324" width="15" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="UserTask_1hj6ohi_di" bpmnElement="Task_0qr8lbk">
        <dc:Bounds x="1060" y="330" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="TextAnnotation_08qedqk_di" bpmnElement="TextAnnotation_08qedqk">
        <dc:Bounds x="1160" y="130" width="130" height="60" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Association_1duwehy_di" bpmnElement="Association_1duwehy">
        <di:waypoint x="1155" y="220" />
        <di:waypoint x="1189" y="190" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="UserTask_0a0cyf5_di" bpmnElement="Task_00n34jz">
        <dc:Bounds x="1320" y="330" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="TextAnnotation_1ahhyo6_di" bpmnElement="TextAnnotation_1ahhyo6">
        <dc:Bounds x="930" y="430" width="100" height="54" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Association_0awos2r_di" bpmnElement="Association_0awos2r">
        <di:waypoint x="1064" y="408" />
        <di:waypoint x="1030" y="431" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="TextAnnotation_147xt1f_di" bpmnElement="TextAnnotation_147xt1f">
        <dc:Bounds x="1460" y="290" width="100" height="40" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Association_1keraq0_di" bpmnElement="Association_1keraq0">
        <di:waypoint x="1420" y="349" />
        <di:waypoint x="1463" y="330" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_0gftvpn_di" bpmnElement="SequenceFlow_0gftvpn">
        <di:waypoint x="1370" y="410" />
        <di:waypoint x="1370" y="750" />
        <di:waypoint x="650" y="750" />
        <di:waypoint x="650" y="298" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_0uc2ktp_di" bpmnElement="SequenceFlow_0uc2ktp">
        <di:waypoint x="1160" y="370" />
        <di:waypoint x="1320" y="370" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_1p31xye_di" bpmnElement="SequenceFlow_1p31xye">
        <di:waypoint x="1160" y="258" />
        <di:waypoint x="1320" y="258" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="EndEvent_1xsmy30_di" bpmnElement="EndEvent_1xsmy30">
        <dc:Bounds x="1582" y="240" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_1b0nftl_di" bpmnElement="SequenceFlow_1b0nftl">
        <di:waypoint x="1420" y="258" />
        <di:waypoint x="1582" y="258" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="ServiceTask_0sv6xck_di" bpmnElement="Task_1cncorr">
        <dc:Bounds x="1320" y="218" width="100" height="80" />
      </bpmndi:BPMNShape>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn2:definitions>
